# FPGA-Course-Project
Implementation of compression on images
## Reference Github Link
https://gitlab.com/libtiff/libtiff/-/blob/master/tools/tiffcp.c

# Steps to run
1. Run the file [here](https://github.com/MChiragV/FPGA-Course-Project/blob/main/Full%20Project/C/rgb_tiff_to_coe.c) to convert the input image to coe file.

```
sudo apt update
sudo apt install libtiff-dev
```

```
gcc rgb_tiff_to_coe.c -o rgb_tiff_to_coe -ltiff
./rgb_tiff_to_coe
```

2. Use this coe file for the BRAM in Vivado and also use the [export](https://github.com/MChiragV/FPGA-Course-Project/blob/main/Full%20Project/Verilog/export.zip) as an IP. Alternatively, you can export it from HLS.
3. Run the code till bitstream.
### Steps to export:
1. Open ILA.
2. Add the signal `ila_start` as a trigger to a rising edge. This signal is a pulse which only goes high for 1 clock cycle when we start reading the array.
3. Run the trigger.
4. You will see the trigger in the centre of the window, which is at 512th sample (1024 depth of ILA). So the array will start at 512th sample and get circled back until it reaches the centre.
5. If we can set the trigger at the 0th sample, there won't be any circle. To do this, use the following command in the Tcl Console:
   ```
   set_property CONTROL.TRIGGER_POSITION 0 [get_hw_ilas hw_ila_1]
   ```
6. You can now export this array as a csv file.
![380453733-97332443-a623-42e3-b729-51ba0a7ae870](https://github.com/user-attachments/assets/3721d403-6391-4888-97d7-4b057e6b022f)


### How to view Image:
Run the python code [here](https://github.com/MChiragV/FPGA-Course-Project/blob/main/Full%20Project/Python/decompress_and_display.py) to decompress and display the output image. It also shows the sizes of the compressed and original image.

### Waveform:
![48e6cbde-508f-4097-96f0-1870408b6df1](https://github.com/user-attachments/assets/e9221e6f-32ad-4971-b20d-1e5273c8ee1f)

From the above screenshot we can observe that the output elements are only valid when both we0 and ce0 signals are high. The address is also incremented during that period. Similarly, the output size signal is final when the output_size_ap_vld signal goes high. We use these signals in our verilog code to use the output generated by the IP instance. 

### Compressed output example:
![68f61abf-a969-4381-ae8b-37375c739f50](https://github.com/user-attachments/assets/5bd130ed-34af-4f65-83a2-dbbf80521841)

### LZW IP:
![WhatsApp Image 2024-10-29 at 11 24 28_a75288a7](https://github.com/user-attachments/assets/cf3abcf0-dfcb-46dd-bc02-baf44ba77a8d)








